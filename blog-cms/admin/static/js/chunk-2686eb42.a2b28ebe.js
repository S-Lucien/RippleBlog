(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2686eb42"],{"0f5d":function(t,e,n){},1616:function(t,e,n){"use strict";n("77b6")},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7");function i(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){i(a,o,r,s,c,"next",t)}function c(t){i(a,o,r,s,c,"throw",t)}s(void 0)}))}}},"323e":function(t,e,n){var i,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(o="function"==typeof(i=function(){var t,e,n={version:"0.2.0"},i=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(t,e,n){return t<e?e:t>n?n:t}function r(t){return 100*(-1+t)}n.configure=function(t){var e,n;for(e in t)void 0!==(n=t[e])&&t.hasOwnProperty(e)&&(i[e]=n);return this},n.status=null,n.set=function(t){var e=n.isStarted();t=o(t,i.minimum,1),n.status=1===t?null:t;var c=n.render(!e),u=c.querySelector(i.barSelector),l=i.speed,p=i.easing;return c.offsetWidth,a((function(e){""===i.positionUsing&&(i.positionUsing=n.getPositioningCSS()),s(u,function(t,e,n){var o;return(o="translate3d"===i.positionUsing?{transform:"translate3d("+r(t)+"%,0,0)"}:"translate"===i.positionUsing?{transform:"translate("+r(t)+"%,0)"}:{"margin-left":r(t)+"%"}).transition="all "+e+"ms "+n,o}(t,l,p)),1===t?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+l+"ms linear",opacity:0}),setTimeout((function(){n.remove(),e()}),l)}),l)):setTimeout(e,l)})),this},n.isStarted=function(){return"number"==typeof n.status},n.start=function(){n.status||n.set(0);var t=function(){setTimeout((function(){n.status&&(n.trickle(),t())}),i.trickleSpeed)};return i.trickle&&t(),this},n.done=function(t){return t||n.status?n.inc(.3+.5*Math.random()).set(1):this},n.inc=function(t){var e=n.status;return e?("number"!=typeof t&&(t=(1-e)*o(Math.random()*e,.1,.95)),e=o(e+t,0,.994),n.set(e)):n.start()},n.trickle=function(){return n.inc(Math.random()*i.trickleRate)},t=0,e=0,n.promise=function(i){return i&&"resolved"!==i.state()?(0===e&&n.start(),t++,e++,i.always((function(){0==--e?(t=0,n.done()):n.set((t-e)/t)})),this):this},n.render=function(t){if(n.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=i.template;var o,a=e.querySelector(i.barSelector),c=t?"-100":r(n.status||0),l=document.querySelector(i.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),i.showSpinner||(o=e.querySelector(i.spinnerSelector))&&f(o),l!=document.body&&u(l,"nprogress-custom-parent"),l.appendChild(e),e},n.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(i.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&f(t)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var a=function(){var t=[];function e(){var n=t.shift();n&&n(e)}return function(n){t.push(n),1==t.length&&e()}}(),s=function(){var t=["Webkit","O","Moz","ms"],e={};function n(n){return n=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})),e[n]||(e[n]=function(e){var n=document.body.style;if(e in n)return e;for(var i,o=t.length,r=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((i=t[o]+r)in n)return i;return e}(n))}function i(t,e,i){e=n(e),t.style[e]=i}return function(t,e){var n,o,r=arguments;if(2==r.length)for(n in e)void 0!==(o=e[n])&&e.hasOwnProperty(n)&&i(t,n,o);else i(t,r[1],r[2])}}();function c(t,e){return("string"==typeof t?t:p(t)).indexOf(" "+e+" ")>=0}function u(t,e){var n=p(t),i=n+e;c(n,e)||(t.className=i.substring(1))}function l(t,e){var n,i=p(t);c(t,e)&&(n=i.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function p(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function f(t){t&&t.parentNode&&t.parentNode.removeChild(t)}return n})?i.call(e,n,e,t):i)||(t.exports=o)},"77b6":function(t,e,n){},a5d8:function(t,e,n){},b6a0:function(t,e,n){"use strict";n.r(e);var i=n("1da1"),o=(n("96cf"),n("a15b"),n("99af"),n("d3b7"),n("159b"),n("b0c0"),n("ac1f"),n("841c"),n("1276"),n("c00a")),r=n("c9f7"),a=n("c54a"),s=n("f988"),c=n("f43e"),u=[],l=null;function p(){if(0===u.length)return clearInterval(l),void(l=null);u.shift()(),0===u.length&&(clearInterval(l),l=null)}var f={name:"GithubManage",components:{SvgIcon:o.a},data:function(){var t,e=this;return{reposList:[],pathArr:[{value:"",label:"根目录"}],activeRepos:"",activePath:[""],pathProps:{lazy:!0,checkStrictly:!0,lazyLoad:(t=Object(i.a)(regeneratorRuntime.mark((function t(n,i){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.path.join("/"),r=[],t.next=4,e.getReposContents(r,o);case 4:i(r);case 5:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})},hintShow1:!0,hintShow2:!0,hintShow3:!0,fileList:[],resourceShow:0,isDrawerShow:!1,nameType:"1",uploadList:[],isCDN:!0,isCustomPath:!1,customPath:""}},computed:{realPath:function(){return this.isCustomPath?"/".concat(this.userInfo.login,"/").concat(this.activeRepos,"/").concat(this.customPath):"/".concat(this.userInfo.login,"/").concat(this.activeRepos).concat(this.activePath.join("/"),"/")}},created:function(){this.hintShow1=!localStorage.getItem("hintShow1"),this.hintShow2=!localStorage.getItem("hintShow2"),this.hintShow3=!localStorage.getItem("hintShow3");var t=localStorage.getItem("githubToken"),e=localStorage.getItem("githubUserInfo");t&&e?(this.userInfo=JSON.parse(e),this.getRepos()):(this.msgError("请先配置Token"),this.$router.push("/pictureHosting/setting"))},methods:{getRepos:function(){var t=this;Object(r.d)(this.userInfo.login).then((function(e){t.reposList=e}))},changeRepos:function(){this.resourceShow++,this.activePath=[""],this.fileList=[]},getReposContents:function(t,e){var n=this;return Object(i.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(r.b)(n.userInfo.login,n.activeRepos,e).then((function(e){e.forEach((function(e){"dir"===e.type&&t.push({value:e.name,label:e.name,leaf:!1})}))}));case 2:case"end":return i.stop()}}),i)})))()},search:function(){var t=this;this.fileList=[];var e=this.activePath.join("/");Object(r.b)(this.userInfo.login,this.activeRepos,e).then((function(e){e.forEach((function(e){"file"===e.type&&Object(a.b)(e.name)&&t.fileList.push(e)}))}))},noDisplay:function(t){localStorage.setItem("hintShow".concat(t),"1")},imgUrl:function(t){return this.isCDN?"https://fastly.jsdelivr.net/gh/".concat(this.userInfo.login,"/").concat(this.activeRepos,"/").concat(t.path):t.download_url},copy:function(t,e){var n="https://fastly.jsdelivr.net/gh/".concat(this.userInfo.login,"/").concat(this.activeRepos,"/").concat(e.path),i=n;2==t&&(i="![".concat(e.name,"](").concat(n,")")),Object(c.a)(i),this.msgSuccess("复制成功")},delFile:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={message:"Delete file via PictureHosting",sha:t.sha};Object(r.a)(e.userInfo.login,e.activeRepos,t.path,n).then((function(){e.msgSuccess("删除成功"),e.search()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},submitUpload:function(){this.uploadList=this.$refs.uploadRef.uploadFiles,this.uploadList.length?this.$refs.uploadRef.submit():this.msgError("请先选择文件")},upload:function(t){var e=this,n=new FileReader;n.readAsDataURL(t.file),n.onload=function(){var i,o,r=n.result.split(",")[1],a=t.file.name;"2"===e.nameType&&(a=Object(s.a)()+a.substr(a.lastIndexOf("."))),i=function(){return e.push2Github(t,a,r)},o=1e3,u.push(i),l||(p(),l=setInterval(p,o))}},push2Github:function(t,e,n){var i=this,o={message:"Add files via PictureHosting",content:n},a=this.activePath.join("/");this.isCustomPath&&("/"===this.customPath?a="":("/"!==(a=this.customPath).charAt(0)&&(a="/"+a),"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)))),Object(r.e)(this.userInfo.login,this.activeRepos,a,e,o).then((function(){i.msgSuccess("上传成功"),t.onSuccess()}))}}},h=(n("e9fc"),n("1616"),n("2877")),d=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-select",{staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择仓库",filterable:!0},on:{change:t.changeRepos},model:{value:t.activeRepos,callback:function(e){t.activeRepos=e},expression:"activeRepos"}},t._l(t.reposList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),n("el-cascader",{key:t.resourceShow,staticStyle:{"min-width":"450px"},attrs:{placeholder:"请选择目录",options:t.pathArr,props:t.pathProps,disabled:!t.activeRepos},model:{value:t.activePath,callback:function(e){t.activePath=e},expression:"activePath"}}),n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search",disabled:!t.activeRepos},on:{click:t.search}},[t._v("查询")]),n("el-switch",{attrs:{"active-text":"CDN","inactive-text":"源站",disabled:!t.activeRepos},model:{value:t.isCDN,callback:function(e){t.isCDN=e},expression:"isCDN"}}),n("el-button",{staticClass:"right-item",attrs:{type:"primary",size:"medium",icon:"el-icon-upload",disabled:!t.activeRepos},on:{click:function(e){t.isDrawerShow=!t.isDrawerShow}}},[t._v("上传")])],1),t.hintShow1?n("el-alert",{attrs:{title:"只显示<img>标签支持的 apng,avif,bmp,gif,ico,cur,jpg,jpeg,jfif,pjpeg,pjp,png,svg,tif,tiff,webp 格式的图片，见 https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img",type:"warning","show-icon":"","close-text":"不再提示"},on:{close:function(e){return t.noDisplay(1)}}}):t._e(),t.hintShow2?n("el-alert",{attrs:{title:"仅支持获取1000个文件内的目录，超出则将请求失败",type:"warning","show-icon":"","close-text":"不再提示"},on:{close:function(e){return t.noDisplay(2)}}}):t._e(),t.hintShow3?n("el-alert",{attrs:{title:"不可上传同名文件，否则将收到422错误码，如需替换，请先删除原文件",type:"warning","show-icon":"","close-text":"不再提示"},on:{close:function(e){return t.noDisplay(3)}}}):t._e(),n("el-row",{directives:[{name:"viewer",rawName:"v-viewer"}]},t._l(t.fileList,(function(e,i){return n("div",{key:i,staticClass:"image-container"},[n("el-image",{attrs:{src:t.imgUrl(e),fit:"scale-down"}}),n("div",{staticClass:"image-content"},[n("div",{staticClass:"info"},[n("span",[t._v(t._s(e.name))])]),n("div",{staticClass:"icons"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制CDN链接",placement:"bottom"}},[n("i",{staticClass:"icon el-icon-link",on:{click:function(n){return t.copy(1,e)}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制MD格式",placement:"bottom"}},[n("SvgIcon",{attrs:{"icon-class":"markdown","class-name":"icon"},on:{click:function(n){return t.copy(2,e)}}})],1),n("i",{staticClass:"icon el-icon-delete",on:{click:function(n){return t.delFile(e)}}})],1)])],1)})),0),n("el-drawer",{attrs:{title:"上传文件",visible:t.isDrawerShow,direction:"rtl",size:"40%",wrapperClosable:!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.isDrawerShow=e}}},[n("el-row",[n("el-radio",{attrs:{label:"1"},model:{value:t.nameType,callback:function(e){t.nameType=e},expression:"nameType"}},[t._v("使用源文件名")]),n("el-radio",{attrs:{label:"2"},model:{value:t.nameType,callback:function(e){t.nameType=e},expression:"nameType"}},[t._v("使用UUID文件名")]),n("el-button",{directives:[{name:"throttle",rawName:"v-throttle",value:[t.submitUpload,"click",3e3],expression:"[submitUpload,`click`,3000]"}],attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[t._v("确定上传")])],1),n("el-row",[t._v(" 当前目录："+t._s(t.realPath)+" ")]),n("el-row",[n("el-switch",{attrs:{"active-text":"自定义目录"},model:{value:t.isCustomPath,callback:function(e){t.isCustomPath=e},expression:"isCustomPath"}}),n("el-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"例：oldFolder/newFolder/",disabled:!t.isCustomPath,size:"medium"},model:{value:t.customPath,callback:function(e){t.customPath=e},expression:"customPath"}})],1),n("el-upload",{ref:"uploadRef",attrs:{action:"","http-request":t.upload,drag:"",multiple:"","file-list":t.uploadList,"list-type":"picture","auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])])])],1)],1)}),[],!1,null,"23d96e02",null);e.default=d.exports},c9f7:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"e",(function(){return h}));n("ac1f"),n("00b4"),n("d3b7"),n("99af");var i=n("bc3a"),o=n.n(i),r=n("323e"),a=n.n(r),s=(n("a5d8"),n("5c96")),c=o.a.create({baseURL:"https://api.github.com",timeout:3e4});function u(t){return c({url:"/user",method:"GET",headers:{Authorization:"token ".concat(t)}})}function l(t){return c({url:"/users/".concat(t,"/repos"),method:"GET"})}function p(t,e,n){return c({url:"/repos/".concat(t,"/").concat(e,"/contents").concat(n),method:"GET"})}function f(t,e,n,i){return c({url:"/repos/".concat(t,"/").concat(e,"/contents/").concat(n),method:"DELETE",data:i})}function h(t,e,n,i,o){return c({url:"/repos/".concat(t,"/").concat(e,"/contents").concat(n,"/").concat(i),method:"PUT",data:o})}c.interceptors.request.use((function(t){a.a.start(),/get/i.test(t.method)&&(t.params=t.params||{},t.params.t=(new Date).getTime());var e=localStorage.getItem("githubToken");return e&&(t.headers.Authorization="token ".concat(e)),t}),(function(t){return console.info(t),Promise.reject(t)})),c.interceptors.response.use((function(t){return a.a.done(),t.data}),(function(t){return console.info(t),s.Message.error(t.message),Promise.reject(t)}))},e9fc:function(t,e,n){"use strict";n("0f5d")},f43e:function(t,e,n){"use strict";function i(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.remove()}n.d(e,"a",(function(){return i}))},f988:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("ac1f"),n("5319"),n("d3b7"),n("25f0");function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}}}]);