(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c594a15c"],{"839e":function(t,e,n){},bbdc:function(t,e,n){"use strict";n.r(e);n("e9c4"),n("d3b7"),n("159b");var i=n("be3b");var a={name:"Moments",data:function(){return{likeMomentIds:JSON.parse(window.localStorage.getItem("likeMomentIds")||"[]"),momentList:[],pageNum:1,totalPage:0}},created:function(){this.getMomentList()},computed:{isLike:function(){return function(t){return this.likeMomentIds.indexOf(t)>-1}}},watch:{likeMomentIds:function(t){window.localStorage.setItem("likeMomentIds",JSON.stringify(t))}},methods:{getMomentList:function(){var t=this,e=window.localStorage.getItem("adminToken");(function(t,e){return Object(i.a)({url:"moments",method:"GET",headers:{Authorization:t},params:{pageNum:e}})})(e||"",this.pageNum).then((function(e){200===e.code?(t.momentList=e.data.list,t.totalPage=e.data.totalPage):t.msgError(e.msg)})).catch((function(){t.msgError("请求失败")}))},handleCurrentChange:function(t){this.scrollToTop(),this.pageNum=t,this.getMomentList()},like:function(t){var e=this;this.likeMomentIds.indexOf(t)>-1?this.$notify({title:"不可以重复点赞哦",type:"warning"}):function(t){return Object(i.a)({url:"moment/like/".concat(t),method:"POST"})}(t).then((function(n){200===n.code?(e.$notify({title:n.msg,type:"success"}),e.likeMomentIds.push(t),e.momentList.forEach((function(e){if(e.id===t)return e.likes++}))):e.$notify({title:n.msg,type:"warning"})})).catch((function(){e.$notify({title:"异常错误",type:"error"})}))}}},s=(n("c35d"),n("2877")),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",{staticClass:"ui attached segment m-padding-bottom-large"},[n("div",{staticClass:"moments"},t._l(t.momentList,(function(e,i){return n("div",{key:i,staticClass:"moment"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.$store.state.introduction.avatar}})]),n("div",{staticClass:"ui card"},[n("div",{staticClass:"content m-top"},[n("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.$store.state.introduction.name))]),n("span",{staticClass:"right floated"},[t._v(t._s(t._f("dateFromNow")(e.createTime)))])]),n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"content typo",class:{privacy:!e.published},domProps:{innerHTML:t._s(e.content)}}),n("div",{staticClass:"extra content"},[n("a",{staticClass:"left floated",on:{click:function(n){return t.like(e.id)}}},[n("i",{staticClass:"heart icon",class:t.isLike(e.id)?"like-color":"outline"}),t._v(t._s(e.likes)+" ")])])])])})),0),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.pageNum,"page-count":t.totalPage,layout:"prev, pager, next",background:"","hide-on-single-page":""},on:{"current-change":t.handleCurrentChange}})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ui top attached segment",staticStyle:{"text-align":"center"}},[e("h2",{staticClass:"m-text-500"},[this._v("我的动态")])])}],!1,null,"75aebb7f",null);e.default=o.exports},c35d:function(t,e,n){"use strict";n("839e")}}]);
//# sourceMappingURL=chunk-c594a15c.e3fa24c3.js.map